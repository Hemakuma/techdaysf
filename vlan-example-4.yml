---
-   name: Deploy multiple vlan from host and group variables
    hosts: leafs
    connection: local
    gather_facts: no

    tasks:
        - name: Obtaining device credentials
          include_vars: credentials.yml

        - name: configuring vlans using host variables
          nxos_vlan: vlan_id="{{ item.id }}"  name="{{ item.name }}" state="{{ item.state }}"  provider="{{ creds }}"
          with_items: "{{ host_vlan_list }}"


        - name: configuring vlans using group variable
          nxos_vlan: vlan_id="{{ item.id }}"  name="{{ item.name }}" state="{{ item.state }}"  provider="{{ creds }}"
          with_items: "{{ group_vlan_list }}"
