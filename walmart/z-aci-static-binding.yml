---
-   name: Static Binding
    hosts: apic
    connection: local
    gather_facts: no

    vars:
        user: admin
        passwd: rovikumar
        tenant: walmart2

    tasks:


#- aci_rest: action=post uri=/api/mo/uni.xml config_file=/home/cisco/ansible/aci/configs/aci_config.xml host={{ inventory_hostname }} username={{ user }} password={{ pass }}

        - name: Create Static path binding
          aci_epg_static_binding:
              action: post
              tenant: walmart
              application_profile: PCI
              epg_name: vlan902
              path:
              encap: vlan-902
              mode: trunk
              immediacy: 
              username: "{{ user }}"
              password: "{{ passwd }}"
              host: "{{ inventory_hostname }}"

        - name: Create EPG
          aci_rest:
              action: post
              uri: api/mo/uni.xml
              config_file: create-epg.xml
              username: "{{ user }}"
              password: "{{ passwd }}"
              host: "{{ inventory_hostname }}"
