---
-   name: Create tenant template
    hosts: apic
    connection: local
    gather_facts: no

    vars:
        user: admin
        passwd: rovikumar
        tenantname: walmarthk

    tasks:
    # Create config files
        - name: creating the template
          template: src=template/tenant.j2 dest=config/tn-create.xml

        - name: creating the tenant using the template
          aci_rest:
              action: post
              uri: /api/mo/uni.xml
              config_file: config/tn-create.xml
              username: "{{ user }}"
              password: "{{ passwd }}"
              host: "{{ inventory_hostname }}"
        # - name: creating VRF for PCI traffic
        #     aci
